<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>កម្មវិធីគ្រប់គ្រងគ្រឿងឡាន</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <div class="header"><h1>🚗 កម្មវិធីគ្រប់គ្រងគ្រឿងឡាន</h1></div>
    <div class="tabs">
        <button class="tab active" onclick="switchTab('stock')">📦 ស្តុក</button>
        <button class="tab" onclick="switchTab('add')">➕ បន្ថែម</button>
        <button class="tab" onclick="switchTab('stats')">📊 ស្ថិតិ</button>
    </div>
    <!-- STOCK -->
    <div id="stock-tab" class="tab-content active">
        <div class="search-box">
            <input id="searchInput" placeholder="🔍 Brake + Toyota + 2002" oninput="searchItems()">
        </div>
        <div id="inventoryList" class="inventory-list"></div>
    </div>
    <!-- ADD -->
    <div id="add-tab" class="tab-content">
        <div class="form-card">
            <form onsubmit="saveItem(event)">
                <label>ក្រុមហ៊ុន</label><input id="company" required>
                <label>កូដ</label><input id="productCode" required>
                <label>ឈ្មោះគ្រឿង</label><input id="partName" required>
                <label>ម៉ូដែលឡាន</label><input id="carModel" required>
                <label>ឆ្នាំម៉ូដែល</label><input id="modelYear" required>
                <label>រូបភាព</label><input type="file" id="productImage" accept="image/*">
                <label>តម្លៃទិញ</label><input type="number" id="buyPrice" required step="0.01">
                <label>តម្លៃលក់</label><input type="number" id="sellPrice" required step="0.01">
                <button class="btn">💾 រក្សាទុក</button>
            </form>
        </div>
    </div>
    <!-- STATS -->
    <div id="stats-tab" class="tab-content">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalItems">0</div>ទំនិញសរុប
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalProfit">$0</div>ចំណេញសរុប
            </div>
        </div>
    </div>
</div>

<!-- Edit Modal -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>✏️ កែប្រែ</h2>
            <button class="close-btn" onclick="closeModal()">×</button>
        </div>
        <form onsubmit="updateItem(event)">
            <input type="hidden" id="editId">
            <label>ក្រុមហ៊ុន</label><input id="editCompany" required>
            <label>កូដ</label><input id="editProductCode" required>
            <label>ឈ្មោះគ្រឿង</label><input id="editPartName" required>
            <label>ម៉ូដែលឡាន</label><input id="editCarModel" required>
            <label>ឆ្នាំម៉ូដែល</label><input id="editModelYear" required>
            <label>តម្លៃទិញ</label><input type="number" id="editBuyPrice" required step="0.01">
            <label>តម្លៃលក់</label><input type="number" id="editSellPrice" required step="0.01">
            <button class="btn">💾 រក្សាទុក</button>
        </form>
    </div>
</div>

<!-- Duplicate Code Warning Modal -->
<div id="duplicateModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>⚠️ រកឃើញកូដស្ទួន</h2>
            <button class="close-btn" onclick="closeDuplicateModal()">×</button>
        </div>
        <p>កូដ "<span id="duplicateCode"></span>" មានរួចហើយនៅក្នុងប្រព័ន្ធ។<br>តើអ្នកចង់៖</p>
        <div class="modal-buttons">
            <button class="modal-btn-add" onclick="addAsNew()">បន្ថែមជាថ្មី</button>
            <button class="modal-btn-edit" onclick="editExisting()">កែប្រែចាស់</button>
            <button class="modal-btn-cancel" onclick="closeDuplicateModal()">បោះបង់</button>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>